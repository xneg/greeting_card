<template>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   @click="click"
   version="1.1"
   viewBox="-320 -50 600 400"
   width="50%">
  <g
     id="layer1">
    <g id="mainLeg" :class="{mainLegUp: applyRotation}" :style="{transition: transition}">
      <g
         id="g1810">
        <path
           id="path995-3-2-7-7-4-5"
           d="m -41.491955,236.95208 a 39.902299,39.902299 0 0 0 0.270617,56.42917 39.902299,39.902299 0 0 0 56.426322,-0.26762 39.902299,39.902299 0 0 0 2.723768,-3.11833 l 81.463736,-93.21062 a 31.921839,31.921839 0 0 0 -0.214119,-45.14678 31.921839,31.921839 0 0 0 -45.143896,0.21716 l -92.116936,82.06004 a 39.902299,39.902299 0 0 0 -3.409428,3.03706 z"
           style="opacity:1;fill:#e8cea8;fill-opacity:1;stroke:none;stroke-width:15.96091938;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
        <path
           id="rect982-34"
           d="m -41.221313,293.38105 a 39.9023,39.9023 0 0 0 56.426261,-0.26748 39.9023,39.9023 0 0 0 2.72373,-3.11837 l 60.260101,-68.94877 -47.972903,-47.9729 -68.298327,60.84184 a 39.9023,39.9023 0 0 0 -3.409617,3.03689 39.9023,39.9023 0 0 0 0.270755,56.42879 z"
           style="opacity:1;fill:#000000;fill-opacity:1;stroke:none;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
      </g>
      <g id="smallLeg" :class="{smallLegUp: applyRotation}" :style="{transition: transition}">
        <path
           id="path1063-5-7-9-8-9"
           d="m 55.385725,150.00448 a 31.921839,31.921839 0 0 0 -5.952269,7.45603 31.921839,31.921839 0 0 0 5.643963,39.04571 56.03154,31.92195 45.191673 0 0 30.87335,19.99663 l 81.592901,77.18211 0.007,-0.007 a 19.413101,19.413101 0 0 0 0.25371,0.23957 19.413101,19.413101 0 0 0 27.40945,-1.56793 19.413101,19.413101 0 0 0 -1.56764,-27.40914 L 110.71308,164.25303 A 56.03154,31.92195 45.191673 0 0 99.9724,151.21326 l -0.214473,-0.26114 -0.01868,0.0181 a 56.03154,31.92195 45.191673 0 0 -0.02942,-0.03 l -0.01083,0.0104 a 31.921839,31.921839 0 0 0 -6.656859,-5.17349 31.921839,31.921839 0 0 0 -37.65502,4.22394 z"
           style="opacity:1;fill:#d6a865;fill-opacity:1;stroke:none;stroke-width:15.34017563;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
        <g id="foot" :class="{footUp: applyRotation}" :style="{transition: transition}">
          <path
             style="opacity:1;fill:#c83737;fill-opacity:1;stroke:none;stroke-width:12.9420681;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
             d="m 167.04265,265.65814 0.0169,0.0169 a 19.413101,19.413101 0 0 0 -0.82312,0.8372 19.413101,19.413101 0 0 0 1.56752,27.40909 19.413101,19.413101 0 0 0 27.40949,-1.56729 l 41.1399,-40.8655 -0.01,-0.0101 a 11.415195,11.415195 0 0 0 0.98189,-0.9621 11.415195,11.415195 0 0 0 -0.92128,-16.1173 11.415195,11.415195 0 0 0 -13.59252,-1.1888 l 0.0111,-0.011 -47.39101,27.57691 a 19.413101,19.413101 0 0 0 -8.31249,4.83719 z"
             id="path1209-5-5-4-3-1" />
        </g>
      </g>
    </g>
    <g id="body" :class="{bodyUp: applyRotation}" :style="{transition: transition}">
      <g
         id="g1757">
        <path
           id="path968-0-3"
           d="m -97.446217,83.789311 a 39.902297,39.902297 0 0 0 -2.550447,1.209154 v 0 a 39.902297,39.902297 0 0 0 -19.845246,23.915195 39.902297,39.902297 0 0 0 2.08326,28.35555 l -0.0435,0.0203 0.3241,0.60038 a 39.902297,39.902297 0 0 0 1.47391,2.72069 l 48.684107,89.84275 c 5.773903,17.31808 11.865669,34.54335 17.036798,52.05119 8.422941,19.6619 34.245451,29.90032 53.6090891,20.34232 C 20.301983,295.34574 29.73011,274.92207 25.284126,257.04156 23.712644,249.68967 19.477927,243.36136 15.085719,237.4234 7.6966628,225.76356 0.75114376,213.8311 -6.5540791,202.11939 c -3.146e-4,-4.4e-4 -4.226e-4,-9.1e-4 -8.453e-4,-0.002 L -44.075399,107.08785 a 39.902297,39.902297 0 0 0 -1.0338,-2.61688 l -0.362237,-0.90933 -0.0435,0.0203 a 39.902297,39.902297 0 0 0 -24.608072,-21.360382 39.902297,39.902297 0 0 0 -27.320223,1.566825 z"
           style="opacity:1;vector-effect:none;fill:#c83737;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:3.99022985;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path
           id="path1005-8"
           d="m -21.940847,248.5644 a 29.937651,89.812957 64.999999 0 0 -33.112773,18.55966 c 1.64829,5.10887 3.249874,10.23239 4.770447,15.38058 8.090197,18.88514 32.231511,29.07311 51.2845652,21.37951 a 29.937651,89.812957 64.999999 0 0 2.324515,-1.03717 29.937651,89.812957 64.999999 0 0 0.017265,-0.008 c 0.00992,-0.004 0.019663,-0.009 0.029495,-0.0138 a 29.937651,89.812957 64.999999 0 0 1.8528156,-0.89084 C 20.99644,293.79526 29.561006,274.2426 25.283884,257.04123 c -1.571476,-7.3519 -5.806166,-13.68019 -10.198393,-19.61816 -0.487632,-0.76952 -0.968868,-1.54309 -1.4529,-2.31484 a 29.937651,89.812957 64.999999 0 0 -35.573745,13.4557 z"
           style="opacity:1;fill:#000000;fill-opacity:1;stroke:none;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
      </g>
      <circle
         style="opacity:1;fill:#e8cea8;fill-opacity:1;stroke:none;stroke-width:18.28250694;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="path828-2-8-8-9-2-9"
         cx="-65.392471"
         cy="-63.637051"
         transform="rotate(-65.94369)"
         r="53.578068" />
      <g id="mainArm" :class="{mainArmUp: applyRotation}" :style="{transition: transition}">
        <g id="smallArm" :class="{smallArmUp: applyRotation}" :style="{transition: transition}">
          <circle
             style="opacity:1;fill:#ddb77f;fill-opacity:1;stroke:none;stroke-width:16.01442528;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
             id="path1209-8-3-9-4-6-6"
             cx="128.46225"
             cy="104.6769"
             r="24.021641"
             transform="rotate(-20.774155)" />
          <path
             style="opacity:1;fill:#ddb77f;fill-opacity:1;stroke:none;stroke-width:0.41633624;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
             d="m 17.614147,69.645827 0.01588,0.0555 A 19.366035,19.366035 0 0 0 16.502597,70.015764 19.366035,19.366035 0 0 0 4.2668342,94.518598 19.366035,19.366035 0 0 0 27.642161,107.06885 l 0.0155,0.0569 L 161.48707,67.872278 A 16.135185,16.135185 0 0 0 172.8967,48.110944 16.135185,16.135185 0 0 0 153.1347,36.70135 Z"
             id="path1208-89-56" />
        </g>
        <g
           id="g1761">
          <path
             style="opacity:1;fill:#e8cea8;fill-opacity:1;stroke:none;stroke-width:12.94206715;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
             d="m -89.574978,93.655522 a 23.94138,23.94138 0 0 0 -16.928992,29.321818 23.94138,23.94138 0 0 0 29.321852,16.92897 23.94138,23.94138 0 0 0 1.736667,-0.54289 l 103.102662,-32.23633 -0.006,-0.0225 A 19.413101,19.413101 0 0 0 28.781053,106.78906 19.413101,19.413101 0 0 0 41.046388,82.226883 19.413101,19.413101 0 0 0 17.61416,69.645914 l -0.006,-0.02251 z"
             id="path1209-5-5-6-7" />
          <path
             style="opacity:1;fill:#ed5c5c;fill-opacity:1;stroke:none;stroke-width:2;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
             d="m -89.574724,93.655489 a 23.941379,23.941379 0 0 0 -16.928956,29.321831 23.941379,23.941379 0 0 0 29.321819,16.92896 23.941379,23.941379 0 0 0 1.73664,-0.5429 l 33.278641,-10.4048 -11.610167,-43.329736 z"
             id="rect996-8" />
        </g>
      </g>
    </g>
  </g>
</svg>
</template>

<script>
import { mapMutations, mapState } from 'vuex'

export default {
    data() {
        return {
            applyRotation: false,
            animationUp: 0.6,
            clicked: false
        }
    },
    computed: {
        transition() {
            return 'transform ' + this.animationUp +'s'
        },
        ...mapState({
            absCount: state => state.absCount
        })
    },
    methods: {
        ...mapMutations({absAdd: 'absCountIncrement'}),
        click() {
            if (this.clicked)
                return;
            this.clicked = true;
            this.applyRotation = true;
            var vm = this;
            setTimeout(function() {
                vm.applyRotation = false;
            }, this.animationUp * 1000);

            setTimeout(function() {
                vm.clicked = false;
                vm.absAdd();

                if (vm.absCount == 5)
                {
                    vm.$emit('show-floating-text', "Легко?");
                }
                else if (vm.absCount == 12)
                {
                    vm.animationUp = 1;
                    vm.$emit('show-floating-text', "Становится тяжелее!");
                }
                else if (vm.absCount == 16)
                {
                    vm.animationUp = 1.5;
                    vm.$emit('show-floating-text', "Последние подходы самые тяжёлые!");
                }
                else if (vm.absCount == 19)
                {
                    vm.$emit('show-floating-text', "Ты справишься!");
                }
            }, this.animationUp * 2000);
        }
    }      
}
</script>

<style scoped>

svg {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width:350px;
}

#body {
  -webkit-transform-origin: -14.003468px 265.587px;
	transform-origin: -14.003468px 265.587px;

	-webkit-transform: rotate(-60deg);
	transform: rotate(-60deg);
}

.bodyUp {
  -webkit-transform: rotate(-10deg) !important;
	transform: rotate(-10deg) !important;
}

#mainArm {
  -webkit-transform-origin: -83.35061px 116.87124px;
	transform-origin: -83.35061px 116.87124px;

	-webkit-transform: rotate(100deg);
	transform: rotate(100deg); 
}

.mainArmUp {
  -webkit-transform: rotate(20deg) !important;
	transform: rotate(20deg) !important;
}

#smallArm {
  -webkit-transform-origin: 22.657041px 88.466613px;
	transform-origin: 22.657041px 88.466613px;

	-webkit-transform: rotate(-50deg);
	transform: rotate(-50deg); 
}

.smallArmUp {
  -webkit-transform: rotate(0deg) !important;
	transform: rotate(0deg) !important;
}

#mainLeg {
  -webkit-transform-origin: -14.003472px 265.587px;
	transform-origin: -14.003472px 265.587px;

	-webkit-transform: rotate(5deg);
	transform: rotate(15deg);
}

.mainLegUp {
  -webkit-transform: rotate(-5deg) !important;
	transform: rotate(-5deg) !important;
}

#smallLeg {
  -webkit-transform-origin: 77.475879px 174.10765px;
	transform-origin: 77.475879px 174.10765px;

	-webkit-transform: rotate(-22deg);
	transform: rotate(-22deg);
}

.smallLegUp {
  -webkit-transform: rotate(15deg) !important;
	transform: rotate(15deg) !important;
}

#foot {
  -webkit-transform-origin: 180.96323px 279.40463px;
	transform-origin: 180.96323px 279.40463px;

	-webkit-transform: rotate(20deg);
	transform: rotate(20deg); 
}

.footUp {
  -webkit-transform: rotate(35deg) !important;
	transform: rotate(35deg) !important;
}
</style>
